/*! Hatchling Map - v2.1.3 - 2013-04-12
* https://github.com/hatchddigital/jquery.lecarte
* Copyright (c) 2013 Hatchd Digital; Licensed MIT */
(function(e){"use strict";var t=function(t,n){n=e.extend({latitude:-31.95391,longitude:115.858512,popup_close_icon:null,popup_close_margin:"0px",popup_offset:new google.maps.Size(60,100)},n);if(!t||!e(t).length)return!1;var r=e.extend({zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP,center:new google.maps.LatLng(n.latitude,n.longitude)},n);return this.google_map=new google.maps.Map(t,r),this.available_markers=[],this.infowindow=new InfoBox({alignBottom:!0,pixelOffset:n.popup_offset,closeBoxURL:n.popup_close_icon,closeBoxMargin:n.popup_close_margin,infoBoxClearance:new google.maps.Size(40,40)}),this};t.prototype.addMarker=function(e,t,n,r,i,s){var o=new google.maps.Marker({position:e,map:this.google_map,title:t,icon:r,optimized:!1});o.id=n,o.infowindow=this.infowindow,o.description=i,o.type=s||{},this.available_markers.push(o),google.maps.event.addListener(o,"click",function(){o.map.panTo(o.position),o.infowindow.setContent(o.description),o.infowindow.open(o.map,o)})},t.prototype.panTo=function(e){this.google_map.panTo(e),this.google_map.setZoom(12)},t.prototype.centerOnMarker=function(t){var n=t.id||!1,r=t.title||!1,i=t.zoom||!1,s=this;if(!n&&!r)return!1;e.each(this.available_markers,function(e,t){if(t.title===r||t.id===n)s.google_map.panTo(t.position),s.infowindow.getContent()!==t.description&&(s.infowindow.setContent(t.description),s.infowindow.open(t.map,t),i&&s.google_map.setZoom(i))})},t.prototype.toggleMarkers=function(t){var n=t.type||!1,r=t.action||!1;e.each(this.available_markers,function(e,t){if(!n||t.type===n)t.setVisible(r),!r&&this.infowindow.getContent()===t.description&&t.infowindow.close()})},e.fn.pinmap=function(n){n=n||{},this.each(function(){var r=e(this),i=new google.maps.Geocoder,s=r.data("map"),o=r.attr("data-address")!==undefined?r.attr("data-address"):!1;s||r.data("map",s=new t(this,n)),o&&i.geocode({address:o},function(e,t){t===google.maps.GeocoderStatus.OK&&t!==google.maps.GeocoderStatus.ZERO_RESULTS&&(s.google_map.panTo(e[0].geometry.location),n.addPin&&s.addMarker(e[0].geometry.location,o))})});if(this.length===1)return e(this).data("map")},window.PinMap=t})(window.jQuery);